# PHP / –ê–≤—Ç–æ—Ä–∏–∑—Ü–∏—è –∏ –≤—ã—Ö–æ–¥
## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```mermaid
graph TD;
	–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è{–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è} -- –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω --> login
	–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è{–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è} -- –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω --> startGame
```

### –í—ã—Ö–æ–¥ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞
```mermaid
graph TD;
	–í—ã—Ö–æ–¥{–í—ã—Ö–æ–¥} --> main
```

## –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö
### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
* –ò–∑ —Ñ–æ—Ä–º—ã `login.php` -> `auth.php`
  * –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–≤ —Ä–∞–∑–¥–µ–ª–µ *"–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã"*)
* –ò–∑ `auth.php` -> `login.php`:
  <details>
  <summary>
  login.php
  </summary>
  
  ```
  // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
  <p class="login-form__cantFindUser incorrect-text">
  <?php
    if (isset($_SESSION['ICantFindUser']) && $_SES['ICantFindUser'] === true) {
      echo "–ü–æ—Ö–æ–¥—É —Ç—ã —á—ë—Ç –Ω–µ —Ç–∞–∫ –≤–≤—ë–ª. –ù–µ –º–æ–≥—É —Ç–µ–±—è –Ω–∞–π–ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑–æ–∫.";
      $_SESSION['ICantFindUser'] = false;
    } else {
      echo "";
    }
  ?>
  </p>
  ```
  </details>
  
### –í—ã—Ö–æ–¥ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞

* –ò–∑ `–ª—é–±–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (pop-up —Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏)` -> `exit.php`.
  * –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–≤ —Ä–∞–∑–¥–µ–ª–µ *"–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã"*)
* –ò–∑ `exit.php` -> `index.php`:
  * –¢—É–ø–∞ –≤—ã—Ö–æ–¥–∏–º –∏–∑ –∞–∫–∫–∞ 

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã (–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
<details>
<summary>
–ó–∞–ø—É—Å–∫ —Å–µ—Å—Å–∏–∏
</summary>

```
session_start();
```

</details>

<details>
<summary>
–†–∞–±–æ—Ç–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∏–∑ `login.php`
</summary>

```
$login = filter_var(trim($_POST['loginLogin']));

$password = filter_var(trim($_POST['loginPassword']));
$password = md5($password . "myBossIsGay");

$_SESSION['ICantFindUser'] = false; // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω
```

</details>

<details>
<summary>
–ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ SQL
</summary>

```
// –ø–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ SQL
require "connect.php";
```

</details>

<details>
<summary>
–ò—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ç–∞–∫–∏–º –∂–µ login
</summary>

```
$result = $dataBase->query("SELECT * FROM `users` WHERE `login` = '$login' AND `password` = '$password';");
```

</details>

<details>
<summary>
–í—Ö–æ–¥–∏–º / –Ω–µ –≤—Ö–æ–¥–∏–º
</summary>

```
// –ï—Å–ª–∏ —Ç–∞–∫–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å
$user = $result->fetch_assoc();
if (empty($user)) {
  $_SESSION['ICantFindUser'] = true;

  $dataBase->close();
  header('Location: ../login.php');
  exit();
} else { // –ï—Å–ª–∏ —Ç–∞–∫–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É –Ω–∞—Å –µ—â—ë –Ω–µ—Ç
  // (–Ω–∞–∑–≤–∞–Ω–∏–µ –∫—É–∫–∏, —á—Ç–æ —Ö—Ä–∞–Ω–∏–º –≤ –∫—É–∫–∏, —Å–∫–æ–ª—å–∫–æ —Ö—Ä–∞–Ω–∏–º, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º ("/" - —ç—Ç–æ –≤–µ—Å—å —Å–∞–π—Ç))
  // –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ cookie: $_COOKIE['loginCookie'];
  setcookie('loginCookie', $user['login'], time() + 3600 * 24 * 30, "/");
  setcookie('avatarCookie', $user['avatar'], time() + 3600 * 24 * 30, "/");
  setcookie('leftLegCookie', $user['leftLeg'], time() + 3600 * 24 * 30, "/");
  setcookie('rightLegCookie', $user['rightLeg'], time() + 3600 * 24 * 30, "/");
  setcookie('trousersCookie', $user['trousers'], time() + 3600 * 24 * 30, "/");
  setcookie('potatoCookie', $user['potato'], time() + 3600 * 24 * 30, "/");
  setcookie('experimentsCookie', $user['experiments'], time() + 3600 * 24 * 30, "/");

  setcookie('ending1Cookie', $user['ending1'], time() + 3600 * 24 * 30, "/");
  setcookie('ending2Cookie', $user['ending2'], time() + 3600 * 24 * 30, "/");
  setcookie('ending3Cookie', $user['ending3'], time() + 3600 * 24 * 30, "/");
  setcookie('ending4Cookie', $user['ending4'], time() + 3600 * 24 * 30, "/");
  setcookie('ending5Cookie', $user['ending5'], time() + 3600 * 24 * 30, "/");
  setcookie('ending6Cookie', $user['ending6'], time() + 3600 * 24 * 30, "/");
  setcookie('ending7Cookie', $user['ending7'], time() + 3600 * 24 * 30, "/");
  setcookie('ending8Cookie', $user['ending8'], time() + 3600 * 24 * 30, "/");
  setcookie('ending9Cookie', $user['ending9'], time() + 3600 * 24 * 30, "/");
  setcookie('ending10Cookie', $user['ending10'], time() + 3600 * 24 * 30, "/");
  setcookie('ending11Cookie', $user['ending11'], time() + 3600 * 24 * 30, "/");
  setcookie('ending12Cookie', $user['ending12'], time() + 3600 * 24 * 30, "/");
  setcookie('ending13Cookie', $user['ending13'], time() + 3600 * 24 * 30, "/");
  setcookie('ending14Cookie', $user['ending14'], time() + 3600 * 24 * 30, "/");
  setcookie('ending15Cookie', $user['ending15'], time() + 3600 * 24 * 30, "/");
  setcookie('ending16Cookie', $user['ending16'], time() + 3600 * 24 * 30, "/");

  $dataBase->close();
  header('Location: ../startGame.php');
  exit();
}
```

</details>

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã (–í—ã—Ö–æ–¥)
<details>
<summary>
–í—ã—Ö–æ–¥–∏–º = –æ—á–∏—â–∞–µ–º –≤—Å–µ –∫—É–∫–∏
</summary>

```
<?php
session_start();

  setcookie('loginCookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('avatarCookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('leftLegCookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('rightLegCookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('trousersCookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('potatoCookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('experimentsCookie', '', time() - (3600 * 24 * 30), "/");

  setcookie('ending1Cookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('ending2Cookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('ending3Cookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('ending4Cookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('ending5Cookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('ending6Cookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('ending7Cookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('ending8Cookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('ending9Cookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('ending10Cookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('ending11Cookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('ending12Cookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('ending13Cookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('ending14Cookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('ending15Cookie', '', time() - (3600 * 24 * 30), "/");
  setcookie('ending16Cookie', '', time() - (3600 * 24 * 30), "/");
  
  header('Location: /');
?>
```

</details>

## –ó–∞–¥–∞—á–∏:
- [x] –°—Ç–∞–≤–∏—Ç—å –∞–≤–∞—Ç–∞—Ä –ø–æ–ª–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –æ–Ω –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
  <details>
  <summary>
  –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
  </summary>

  ```
  <button class="header__user inputButton"id="achivmentsOptitle="
    <?php
      if (isset($_COOKIE['loginCookie']) && $_CO['loginCookie'] !== '')   {
        echo ($_COOKIE['loginCookie']);
      } else {
        echo '–ù–µ–∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
      }
    ?>
  ">
    <img class="header__user-img" src="
      <?php
        if (isset($_COOKIE['avatarCookie']) && $_CO['avatarCookie']   !==   '') {
          echo ($_COOKIE['avatarCookie']);
        } else {
          echo 'images/avatars/unknown.svg';
        }
      ?>
    " alt="–ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
  </button>
  ```

  </details>
- [x] –ü—Ä–æ—á–µ–∫–∞—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –æ—á–∏—â–µ–Ω–∏–µ –≤—Å–µ—Ö –∫—É–∫–∏—Å–æ–≤
- [x] –ò–Ω–∫–ª—é–¥–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≤ pop-up, –µ—Å–ª–∏ –º—ã –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã. –ö–∞–∫ –º—ã –ø–æ–π–º—ë–º, —á—Ç–æ —Ö–æ—Ç—å –æ–¥–Ω–∞ –∫–æ–Ω—Ü–æ–≤–∫–∞ —É –Ω–∞—Å –æ—Ç–∫—Ä—ã—Ç–∞? –î–∞–≤–∞–π Option1 –ø–æ–¥ —ç—Ç–æ –¥–µ–ª–æ –∑–∞–¥–µ–π—Å—Ç–≤—É–µ–º.
  <details>
  <summary>
  –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π
  </summary>

  * –ï—Å–ª–∏ –Ω–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã - –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è
  * –ï—Å–ª–∏ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã, –Ω–æ –∫–æ–Ω—Ü–æ–≤–æ–∫ –Ω–µ—Ç - 
    * –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –≤—Å–µ `ending`, –µ—Å–ª–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ–ª—É—á–∞–µ–º 0, —Ç–æ –∏ –≤ `option1` –ø–æ–ª—É—á–∞–µ–º 0, —Å–æ–æ–±—â–∞–µ–º, —á—Ç–æ –ø–æ–∫–∞ —á—Ç–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π —É –Ω–∞—Å –Ω–µ—Ç.
    * –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –≤—Å–µ `ending`, –µ—Å–ª–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ–ª—É—á–∞–µ–º >0, —Ç–æ –∏–Ω–∫–ª—é–¥–∏–º —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏.

  </details>
  <details>
  <summary>
  –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
  </summary>

  ```
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –∫–∞–∫–∏–µ-—Ç–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
  $_COOKIE['option1Cookie'] = $_COOKIE['ending1Cookie'] + $_COOKI['ending2Cookie'] + $_COOKIE['ending3Cookie'] + $_COOKI['ending4Cookie'] + $_COOKIE['ending5Cookie'] + $_COOKI['ending6Cookie'] + $_COOKIE['ending7Cookie'] + $_COOKI['ending8Cookie'] + $_COOKIE['ending9Cookie'] + $_COOKI['ending10Cookie'] + $_COOKIE['ending11Cookie'] + $_COOKI['ending12Cookie'] + $_COOKIE['ending13Cookie'] + $_COOKI['ending14Cookie'] + $_COOKIE['ending15Cookie'] + $_COOKI['ending16Cookie'];

  // –ï—Å–ª–∏ –Ω–µ—Ç
  <?php
  if ($_COOKIE['option1Cookie'] === 0):
  ?>
    <p class="tac">
      <?php
        echo $_COOKIE['loginCookie'] . ', —É —Ç–µ–±—è –ø–æ–∫–∞ —á—Ç–æ –Ω–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π((';
      ?>
    </p>

  // –ï—Å–ª–∏ –µ—Å—Ç—å - –ø—Ä–∏–º–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–Ω—Ü–æ–≤–∫–∏
  <?php
    if ($_COOKIE['ending3Cookie'] === '1'):
      ?>
      <button class="achivment-item achivment-negative">
        <img class="achivment-item__img" src="../images/achivments/lemon.svg" alt="">
        Section 3
      </button>
      <div class="achivment-item__description">
        <p>Curabitur eget lorem id massa consequat sagittis.</p>
      </div>
    <?php else: ?>
      
    <?php endif; ?>

  <?php endif; ?>
  ```

  </details>
- [x] –†–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π.
  <details>
  <summary>
  –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:
  </summary>

  ```
      <section class="achivments" id="achivmentsPopUp">
      <button class="achivments__close inputButton" id="achivmentsClose">X</button>

      <?php
      if (isset($_COOKIE['loginCookie']) && $_COOKIE['loginCookie'] !== ''):
        ?>
        <?php
        require 'achivments.php';
        ?>
      <?php else: ?>
        <p class="achivments__text">–î—Ä—É–∂–∏—â–µ, —Ç—ã –Ω–µ –∞—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –ß—Ç–æ–±—ã —É–∑—Ä–µ—Ç—å —Å–≤–æ–∏ –¥–æ—Å—Ç–∂–µ–Ω–∏—è,
          <a href="login.php">–ê–≤—Ç–æ—Ä–∏–∑–∏—Ä—É–π—Å—è</a>
        </p>
      <? endif; ?>
    </section>
  ```

  </details>
- [x] –ï—Å–ª–∏ –º—ã –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã, —Ç–æ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ `–Ω–∞—á–∞—Ç—å –∏–≥—Ä—É` –Ω–∞ –≥–ª–∞–≤–Ω–æ–π –º—ã –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–µ –≤ `login`, –∞ –≤ `startGame`.
  <details>
  <summary>
  –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ index.html
  </summary>

  ```
  // –í–≤–µ—Ä—Ö—É:
  <a class=" inputmain-description__register-btn" href="
    <?php
      if (isset($_COOKIE['loginCookie']) && $['loginCookie'] !== '') {
        echo 'startGame.php';
      } else {
        echo 'login.php';
      }
      ?>
      ">
    –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
  </a>
  ```
  ```
  // –ò –≤–Ω–∏–∑—É
  <a class="inputButton main-start__btn" href="
    <?php
      if (isset($_COOKIE['loginCookie']) && $_C['loginCookie'] !=='') {
        echo 'startGame.php';
      } else {
        echo 'login.php';
      }
      ?>
    ">
    –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
  </a>
  ```

  </details>

- [x] –ï—Å–ª–∏ –º—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã, —Ç–æ –Ω–µ –º–æ–∂–µ–º –ø–µ—Ä–µ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–∞–º login –∏ register
  <details>
  <summary>
  –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:
  </summary>

  ```
  // –ö–æ–≥–¥–∞ –≤—Ö–æ–¥–∏–º –≤ body
  <body>
  <?php
  if (isset($_COOKIE['loginCookie']) && $_COOKIE['loginCookie'] !== ''):
    ?>
    <?php
    header('Location: index.php');
    ?>
  <?php else: ?>

  // –í–µ—Å—å –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

  <?php endif; ?>
  </body>
  ```
  </details>

***
[ü†î –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ä–∞–∑–¥–µ–ª—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ back-end](https://github.com/KirGenHeart/documentation/blob/main/back-end/back-end-dev.md)